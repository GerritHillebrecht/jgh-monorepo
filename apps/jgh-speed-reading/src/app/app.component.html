<section
  class="min-h-full flex flex-col items-center justify-center py-14 gap-14"
>
  <jgh-sr-title></jgh-sr-title>
  <div class="mx-auto w-full max-w-7xl flex flex-col gap-8 px-4">
    <jgh-sr-step-indicator [number]="1">
      <ng-container title>Story.</ng-container>
      <ng-container headline>Wähle deine Geschichte</ng-container>
    </jgh-sr-step-indicator>
    <p class="text-black text-6xl font-bold text-center">
      Deine Zeit, deine Story
    </p>
    <!-- <p class="text-sm opacity-90">
      
    </p> -->
    <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <div
        class="story-card border-2 border-solid relative rounded-xl bg-[rgba(30,30,30,0.05)] p-8 cursor-pointer grid grid-cols-[25%,1fr] items-center gap-4"
        *ngFor="let story of stories; let i = index"
        (click)="selectStory(i)"
        [ngClass]="{
          'border-[#FF0080]': selectedStory() === i
        }"
      >
        <img [src]="'assets/images/drawings/' + story.image" alt="nature" />
        <span class="line-clamp-4">
          <span class="text-xs">Story {{ i + 1 }}:</span><br />
          <span class="font-bold">{{ story.title }}</span>
        </span>
      </div>
    </div>
    <jgh-sr-step-indicator [number]="2" fromColor="#007CF0" toColor="#00DFD8">
      <ng-container title>Geschwindigkeit.</ng-container>
      <ng-container headline>Lies in deiner Geschwindigkeit</ng-container>
    </jgh-sr-step-indicator>
    <div class="flex flex-col gap-1">
      <div
        class="flex gap-y-8 overflow-x-auto w-full pb-4"
        style="scroll-snap-type: x mandatory"
      >
        <div
          *ngFor="let group of groups"
          style="scroll-snap-align: start"
          class="flex flex-col gap-2 shrink-0 px-2 w-full sm:w-1/2 md:w-1/3 lg:w-1/5"
        >
          <p
            class="text-center w-full font-bold"
            [ngStyle]="{ color: group.color }"
          >
            {{ group.type }}
          </p>
          <div
            class="grid grid-cols-3 gap-1"
            [ngStyle]="{ 'border-color': group.color }"
          >
            <div
              class="rounded-lg cursor-pointer border-[1px] border-solid grid place-items-center py-2"
              *ngFor="let option of options | speedGroup : group"
              (click)="setReadSpeed(option.speed)"
              [ngClass]="{
                'border-2 border-inherit': option.speed === readSpeed,
                'border-[1px] border-stone-200': option.speed !== readSpeed
              }"
            >
              {{ option.label }}
            </div>
          </div>
        </div>
      </div>
      <p class="italic text-xs block lg:hidden">
        Wische für weitere Schwierigkeitsgerade
      </p>
    </div>
    <div class="flex justify-center sticky top-4">
      <jgh-sr-play-button
        [playState]="playState()"
        (click)="togglePlay()"
      ></jgh-sr-play-button>
    </div>
    <hr />
    <p
      #readerOutput
      class="text-center py-10"
      [ngStyle]="{ 'font-size': fontSizePx() }"
    >
      {{ readerText()[currentWord()].content }}
    </p>
    <hr />
    <div
      #textContainer
      class="text-position-container overflow-y-auto max-h-[300px] scrollbar-custom px-4"
    >
      <h2 class="text-3xl mb-2 font-bold">
        {{ stories[selectedStory()].title }}
      </h2>
      <p class="text-justify hyphens-auto">
        <span
          #word
          *ngFor="let word of readerText(); let i = index; trackBy: trackByFn"
          class="hover:text-slate-900 hover:opacity-100 cursor-pointer"
          (click)="selectWord(i)"
        >
          {{ word.content }}
        </span>
      </p>
    </div>
  </div>
</section>
